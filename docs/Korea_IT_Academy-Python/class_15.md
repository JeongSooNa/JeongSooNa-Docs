# Class 15 - Python 정규 표현식

정규 표현식(정규식)이란 복잡한 문자열을 처리할 때 사용하는 방법으로, 파이썬 외에도 다양한 프로그래밍 언어에서 편의성을 위해 사용한다.

### 정규 표현식을 사용하는 이유

다음과 같은 문제가 주어졌다고 가정해 보자.

> 주민등록번호를 포함하고 있는 텍스트가 있다. 이 텍스트에 포함된 모든 주민등록번호의 뒷자리를 * 문자로 변경해 보자.

먼저 정규식을 전혀 모르면 다음과 같은 순서로 프로그램을 작성해야 할 것이다.

1. 전체 텍스트를 공백 문자로 나눈다(split).
2. 나뉜 단어가 주민등록번호 형식인지 조사한다.
3. 단어가 주민등록번호 형식이라면 뒷자리를 *로 변환한다.
4. 나뉜 단어를 다시 조립한다.

이를 구현한 코드는 아마도 다음과 같을 것이다.

```py
data = """
park 800905-1049118
kim  700905-1059119
"""

result = []
for line in data.split("\n"):
    word_result = []
    for word in line.split(" "):
        if len(word) == 14 and word[:6].isdigit() and word[7:].isdigit():
            word = word[:6] + "-" + "*******"
        word_result.append(word)
    result.append(" ".join(word_result))
print("\n".join(result))
```

실행 결과

```
park 800905-*******
kim  700905-*******
```

반면, 정규식을 사용하면 다음처럼 훨씬 간편하고 직관적인 코드를 작성할 수 있다. 아직 정규식 사용 방법을 배우지 않았으므로 눈으로만 살펴보자.

```py
import re 

data = """
park 800905-1049118
kim  700905-1059119
"""

pat = re.compile("(\d{6})[-]\d{7}")
print(pat.sub("\g<1>-*******", data))
```

실행결과

```
park 800905-*******
kim  700905-*******
```

정규 표현식을 사용하면 이렇게 코드가 상당히 간결해진다. 만약 찾으려는 문자열 또는 바꾸어야 할 문자열의 규칙이 매우 복잡하다면 정규식의 효용은 더 커지게 된다.

### 정규 표현식 문자 클래스

우리가 가장 먼저 살펴볼 메타 문자는 바로 문자 클래스(character class)인 []이다. 문자 클래스로 만들어진 정규식은 ‘[’ 와 ‘]’ 사이의 문자들과 매치’라는 의미를 갖는다.

- 문자 클래스를 만드는 메타 문자인 [ ] 사이에는 어떤 문자도 들어갈 수 있다.

즉, 정규 표현식이 ```[abc]```라면 이 표현식의 의미는 ‘a, b, c 중 한 개의 문자와 매치’를 뜻한다. 이해를 돕기 위해 문자열 "a", "before", "dude"가 정규식 ```[abc]```와 어떻게 매치되는지 살펴보자.

- "a"는 정규식과 일치하는 문자인 "a"가 있으므로 매치된다.
- "before"는 정규식과 일치하는 문자인 "b"가 있으므로 매치된다.
- "dude"는 정규식과 일치하는 문자인 a, b, c 중 어느 하나도 포함하고 있지 않으므로 매치되지 않는다.

[] 안의 두 문자 사이에 하이픈(-)을 사용하면 두 문자 사이의 범위를 의미한다. 예를 들어 ```[a-c]```라는 정규 표현식은 ```[abc]```와 동일하고 ```[0-5]```는 ```[012345]```와 동일하다.

- [a-zA-Z] : 모든 알파벳
- [0-9] : 모든 숫자

문자 클래스([]) 안에는 어떤 문자나 메타 문자도 사용할 수 있지만, 주의해야 할 메타 문자가 1가지 있다. 그것은 바로 ^인데, 문자 클래스 안에 ^ 메타 문자를 사용할 경우에는 반대(not)라는 의미를 갖는다. 예를 들어 [^0-9]라는 정규 표현식은 숫자가 아닌 문자만 매치된다.

- 자주 사용하는 문자 클래스

    ```[0-9]``` 또는 ```[a-zA-Z]``` 등은 무척 자주 사용하는 정규 표현식이다. 이렇게 자주 사용하는 정규식은 별도의 표기법으로 표현할 수 있다. 다음을 기억해 두자.

    - ```\d``` - 숫자와 매치된다. ```[0-9]```와 동일한 표현식이다.
    - ```\D``` - 숫자가 아닌 것과 매치된다. ```[^0-9]```와 동일한 표현식이다.
    - ```\s``` - 화이트스페이스(whitespace) 문자와 매치된다. ```[ \t\n\r\f\v]```와 동일한 표현식이다. 맨 앞의 빈칸은 공백 문자(space)를 의미한다.
    - ```\S``` - 화이트스페이스 문자가 아닌 것과 매치된다. ```[^ \t\n\r\f\v]```와 동일한 표현식이다.
    - ```\w``` - 문자+숫자(alphanumeric)와 매치된다. ```[a-zA-Z0-9_]```와 동일한 표현식이다.
    - ```\W``` - 문자+숫자(alphanumeric)가 아닌 문자와 매치된다. ```[^a-zA-Z0-9_]```와 동일한 표현식이다.

    대문자로 사용된 것은 소문자의 반대임을 추측할 수 있다.

상세 내용은 Reference를 참조.

REF : [점프 투 파이썬](https://wikidocs.net/1642)